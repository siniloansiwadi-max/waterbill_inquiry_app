<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Water Bill Calculator | SIWADI</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(to bottom right, #e8f0f8, #d9e4ec);
      background-attachment: fixed;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: #002b5b;
      color: #fff;
      padding: 15px 0;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    header h1 {
      font-size: 1.8rem;
      margin-bottom: 8px;
    }

    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background-color: #014272;
    }

    nav a {
      flex: 1;
      padding: 14px 18px;
      text-decoration: none;
      color: #fff;
      font-size: 1rem;
      text-align: center;
      transition: background 0.3s;
    }

    nav a:hover,
    nav a.active {
      background-color: #0169b4;
    }

    main {
      flex: 1;
      padding: 40px 20px;
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      margin-top: 20px;
    }

    h2 {
      color: #002b5b;
      text-align: center;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    select,
    input,
    button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }

    button {
      margin-top: 20px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    #result-area {
      margin-top: 25px;
      padding: 20px;
      border: 2px dashed #007bff;
      border-radius: 8px;
      background-color: #e9f7ff;
      display: none;
    }

    footer {
      text-align: center;
      background: #002b5b;
      color: white;
      padding: 15px;
      font-size: 0.9rem;
      margin-top: auto;
    }

    @media (max-width: 768px) {
      header h1 {
        font-size: 1.5rem;
      }
      nav a {
        flex: 100%;
        font-size: 1.1rem;
      }
      main {
        padding: 20px;
        margin: 15px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Siniloan Water District</h1>
    <p>"Serbisyong Sapat, Serbisyong Tapat". SIWADI Building P. Burgos St. Siniloan, Laguna Tel. No. 049-5016656.</p>
  </header>

  <nav>
    <a href="services.html">üè† Home</a>
    <a href="about.html">üè¢ About Us</a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSdiEmnTo91X_p8VOxcMmgBZXEBxLhSaz3CvABGqaOFXCEVpPw/viewform" target="_blank" rel="noopener">üíß New Connection Inquiry</a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSf4tYSuzu4pwxj5kDNthMsheTLev1p19A1sqqJR_AsMSTPq4Q/viewform" target="_blank" rel="noopener">üìù CSM Survey</a>
    <a href="index.html">üìÑ Bill Inquiry</a>
    <a href="calculator.html" class="active">üßÆ Water Bill Calculator</a>
  </nav>

  <main>
    <h2>Water Bill Estimate Calculator</h2>

    <form id="calculator-form">
      <label for="classification">Select Classification:</label>
      <select id="classification" required></select>

      <label for="consumption">Enter Water Consumption (cu meters):</label>
      <input type="number" id="consumption" min="0" value="10" required>

      <button type="submit">Calculate Bill</button>
    </form>

    <div id="result-area"></div>
  </main>

  <footer>
    ¬© 2025 Siniloan Water District - All Rights Reserved
  </footer>

  <script>
    const RATES = [
      { id: 'res-gov-1-2', class: 'RESIDENTIAL/GOVERNMENT', meter: '1/2"', minCharge: 200.00, rates: [21.13, 23.25, 26.00, 30.00, 34.40] },
      { id: 'com-1-2', class: 'COMMERCIAL', meter: '1/2"', minCharge: 400.00, rates: [42.26, 46.50, 52.00, 60.00, 68.80] },
      { id: 'com-3-4', class: 'COMMERCIAL', meter: '3/4"', minCharge: 640.00, rates: [42.26, 46.50, 52.00, 60.00, 68.80] },
      { id: 'com-1', class: 'COMMERCIAL', meter: '1"', minCharge: 1280.00, rates: [42.26, 46.50, 52.00, 60.00, 68.80] },
      { id: 'semi-a-1-2', class: "SEMI-COM'L. A", meter: '1/2"', minCharge: 350.00, rates: [36.98, 40.69, 45.50, 52.50, 60.20] },
      { id: 'semi-b-1-2', class: "SEMI-COM'L. B", meter: '1/2"', minCharge: 300.00, rates: [31.70, 34.88, 39.00, 45.00, 51.60] },
      { id: 'semi-c-1-2', class: "SEMI-COM'L. C", meter: '1/2"', minCharge: 250.00, rates: [26.41, 29.06, 32.50, 37.50, 43.00] },
      { id: 'bulk-1-2', class: 'BULK/WHOLESALE', meter: '1/2"', minCharge: 600.00, rates: [63.39, 69.75, 78.00, 90.00, 103.20] },
    ];

    const formatCurrency = (amount) => `‚Ç± ${amount.toFixed(2)}`;

    function populateClassification() {
      const select = document.getElementById('classification');
      select.innerHTML = '<option value="" disabled selected>--- Select Classification ---</option>';
      RATES.forEach(rate => {
        const option = document.createElement('option');
        option.value = rate.id;
        option.textContent = `${rate.class} (${rate.meter})`;
        select.appendChild(option);
      });
    }

    function calculateBill(event) {
      event.preventDefault();
      const selectedId = document.getElementById('classification').value;
      const consumption = parseFloat(document.getElementById('consumption').value);
      const resultArea = document.getElementById('result-area');
      resultArea.style.display = 'none';
      resultArea.innerHTML = '';

      if (!selectedId || isNaN(consumption) || consumption < 0) {
        resultArea.innerHTML = '<h3>Error</h3><p>Please select a classification and enter valid consumption.</p>';
        resultArea.style.display = 'block';
        return;
      }

      const rateData = RATES.find(r => r.id === selectedId);
      if (!rateData) return;

      let currentConsumption = consumption;
      const breakdown = [];
      const minVolume = 10;
      let totalVolumeCharge = 0;

      breakdown.push({ desc: `Minimum Charge (First ${minVolume} cu meters)`, charge: rateData.minCharge });

      currentConsumption -= minVolume;
      const blocks = [
        { start: 11, end: 20, rate: rateData.rates[0] },
        { start: 21, end: 30, rate: rateData.rates[1] },
        { start: 31, end: 40, rate: rateData.rates[2] },
        { start: 41, end: 50, rate: rateData.rates[3] },
        { start: 51, end: Infinity, rate: rateData.rates[4] },
      ];

      blocks.forEach(block => {
        if (currentConsumption > 0) {
          const blockSize = block.end === Infinity ? currentConsumption : Math.min(block.end - block.start + 1, currentConsumption);
          const charge = blockSize * block.rate;
          totalVolumeCharge += charge;
          breakdown.push({ desc: `Commodity Charge (${block.start}-${block.end} cu m)`, charge });
          currentConsumption -= blockSize;
        }
      });

      const total = rateData.minCharge + totalVolumeCharge;
      let html = `<h3>Estimated Monthly Bill</h3>`;
      html += `<p><strong>Classification:</strong> ${rateData.class} (${rateData.meter})</p>`;
      html += `<p><strong>Total Consumption:</strong> ${consumption.toFixed(2)} cu meters</p>`;
      breakdown.forEach(b => {
        html += `<p>${b.desc}: <strong>${formatCurrency(b.charge)}</strong></p>`;
      });
      html += `<p class="total"><strong>Total Bill: ${formatCurrency(total)}</strong></p>`;

      resultArea.innerHTML = html;
      resultArea.style.display = 'block';
    }

    document.addEventListener('DOMContentLoaded', () => {
      populateClassification();
      document.getElementById('calculator-form').addEventListener('submit', calculateBill);
    });
  </script>
</body>
</html>
